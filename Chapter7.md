# 多线程编程基础

并行程序设计演进

> 如何正确有效的保护共享数据是编写并行程序必须面临的一个难题，通常的手段就是同步。
>
> 同步可分为**阻塞型同步**和**非阻塞型同步**

+ 死锁：尬住了

+ 产生死锁的共享条件：
  + 互斥条件，共享资源只能被一个线程占用
  + 请求与保持条件（占有且等待）：吃着碗里的看着锅里的
  + 不可剥夺条件（不可抢占）：要资源没有要命一条
  + 循环等待条件：多个线程循环等待资源，而且是循环的互相等待
+ 活锁：锁住了但没完全锁住
+ 饥饿：不抢上，没得吃
+ 优先级反转解决方案
  + 设置优先级上限
  + 优先级继承
+ 互斥锁Mutex（Mutual exclusion）
+ 条件变量
+ 信号量（Semaphore），一种用于提供不同进程之间或者一个给定的不同线程间同步手段的原语。可以用来保证两个或多个关键代码段不被并发调用，可以认为mutex是0-1信号量 ；
+ 读写锁， 读时共享，写时独占，写锁高于读锁
+ 非阻塞型同步
  + 自旋锁
  + 顺序锁
  + RCU
+ 线程池
